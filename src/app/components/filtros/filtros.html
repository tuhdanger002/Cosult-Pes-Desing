<div class="p-8 bg-[#061024b9] min-h-screen text-white">



  <!-- 1. HEADER CENTRALIZADO (ESTILO IMAGEN) -->
  <header class="flex flex-col items-center mb-8 text-center pt-6">
    <img src="assets/logo.png" alt="Logo" class="h-20 mb-4">
    <div class="flex flex-col items-center">
      <h1 class="text-3xl font-bold tracking-tight text-white uppercase italic">
        GERENCIA DE ENERGÍA PREDESPACHO
      </h1>
      <div class="h-1 w-20 bg-blue-600 mt-2 rounded-full"></div>
    </div>
  </header>

  <!-- 2. SECCIÓN DE FILTROS (ESTILO IMAGEN) -->
  <div class="max-w-7xl mx-auto bg-[#1c2237] p-8 rounded-2xl border border-gray-700/30 mb-8 shadow-2xl relative">

    <!-- Row 1: 4 columns -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
      <div class="flex flex-col gap-2">
        <label class="text-xs font-semibold text-gray-400">Número PES</label>
        <input pInputText type="text" [(ngModel)]="filtros.numPes" class="custom-input-v3" placeholder="105" />
      </div>

      <div class="flex flex-col gap-2">
        <label class="text-xs font-semibold text-gray-400">Usuario</label>
        <input pInputText type="text" [(ngModel)]="filtros.usuario" class="custom-input-v3" placeholder="Nombre..." />
      </div>

      <div class="flex flex-col gap-2">
        <label class="text-xs font-semibold text-gray-400">Desde (Fecha Inicio)</label>
        <p-datepicker [(ngModel)]="filtros.desde" [showIcon]="true" appendTo="body" dateFormat="dd/mm/yy"
          class="custom-dp-v3"></p-datepicker>
      </div>

      <div class="flex flex-col gap-2">
        <label class="text-xs font-semibold text-gray-400">Hasta (Fecha Fin)</label>
        <p-datepicker [(ngModel)]="filtros.hasta" [showIcon]="true" appendTo="body" dateFormat="dd/mm/yy"
          class="custom-dp-v3"></p-datepicker>
      </div>
    </div>

    <!-- Row 2: Sector, Gerencia, Button -->
    <div class="grid grid-cols-1 md:grid-cols-12 gap-4 items-end">
      <div class="md:col-span-4 flex flex-col gap-2">
        <label class="text-xs font-semibold text-gray-400">Sector</label>
        <p-select [options]="sectores" [(ngModel)]="filtros.sector" optionLabel="label" placeholder="Seleccione Sector"
          appendTo="body" class="custom-select-v3 w-full"></p-select>
      </div>

      <div class="md:col-span-4 flex flex-col gap-2">
        <label class="text-xs font-semibold text-gray-400">Gerencia</label>
        <p-select [options]="gerencias" [(ngModel)]="filtros.gerencia" optionLabel="label"
          placeholder="Seleccione Gerencia" appendTo="body" class="custom-select-v3 w-full"></p-select>
      </div>

      <div class="md:col-span-4 mt-2 md:mt-0">
        <button type="button" (click)="buscar()" class="btn-consultar-v3 w-full">
          CONSULTAR DATOS
        </button>
      </div>
    </div>

  </div>


  <div class="max-w-full mx-auto custom-tabs">
    <p-tabs [(value)]="activeTab">
      <p-tablist>
        <p-tab value="0">APROBADOS ({{aprobados.length}})</p-tab>
        <p-tab value="1">CANCELADOS ({{cancelados.length}})</p-tab>
        <p-tab value="2">PENDIENTES ({{pendientes.length}})</p-tab>
      </p-tablist>


      <p-tabpanels>

        <p-tabpanel value="0">

          <ng-container *ngTemplateOutlet="tablaTemplate; context: { $implicit: aprobados }"></ng-container>

        </p-tabpanel>

        <p-tabpanel value="1">

          <ng-container *ngTemplateOutlet="tablaTemplate; context: { $implicit: cancelados }"></ng-container>

        </p-tabpanel>

        <p-tabpanel value="2">

          <ng-container *ngTemplateOutlet="tablaTemplate; context: { $implicit: pendientes }"></ng-container>

        </p-tabpanel>

      </p-tabpanels>

    </p-tabs>

  </div>

</div>



<ng-template #tablaTemplate let-data>

  <div class="rounded-xl border border-gray-800 overflow-hidden">

    <p-table [value]="data" [rows]="10" [paginator]="true" class="p-datatable-gridlines custom-table-dark">

      <ng-template pTemplate="header">

        <tr class="text-xl">

          <th>PES</th>
          <th>USUARIO</th>
          <th>RESPONSABLE</th>
          <th>ALIMENTADOR</th>
          <th>FECHA</th>
          <th>INICIO</th>
          <th>FIN</th>
          <th>CAUSA</th>

        </tr>

      </ng-template>



      <ng-template pTemplate="body" let-item let-rowIndex="rowIndex">

        <tr [class.bg-dark-a]="rowIndex % 2 === 0" [class.bg-dark-b]="rowIndex % 2 !== 0" class="hover:bg-blue-900/20">

          <td class="text-green-400 font-bold">{{ item.NUM_PES }}</td>

          <td class="text-gray-300 font-semibold">{{ item.USUARIO }}</td>

          <td class="text-gray-300 font-bold">{{ item.RESPONSABLE }}</td>

          <td class="text-gray-300 font-bold">{{ item.ALIMENTADOR }}</td>

          <td class="text-gray-300 font-bold">{{ item.FECHA_INICIO | date:'dd/MM/yyyy' }}</td>

          <td><span class="text-gray-300">{{ item.FECHA_INICIO | date:'HH:mm' }}</span></td>

          <td><span class="text-gray-300">{{ item.FECHA_FIN | date:'HH:mm' }}</span></td>

          <td class="text-gray-300 font-bold">{{ item.CAUSA }}</td>

        </tr>



        <tr [class.bg-dark-a]="rowIndex % 2 === 0" [class.bg-dark-b]="rowIndex % 2 !== 0">

          <td colspan="8" class="px-10 py-2">

            <span class="text-blue-400 text-s font-bold uppercase">Observación:</span>

            <p class="text-gray-300 italic">{{ item['OBSERVACIÓN'] || 'Sin Observación' }}</p>

          </td>

        </tr>



        <tr [class.bg-dark-a]="rowIndex % 2 === 0" [class.bg-dark-b]="rowIndex % 2 !== 0"
          class="border-b border-gray-800">

          <td colspan="8" class="px-10 py-2 pb-6">

            <span class="text-blue-400 text-s font-bold uppercase">Notas:</span>

            <p class="text-gray-300 italic">{{ item.NOTAS || 'Sin Notas' }}</p>

          </td>

        </tr>

      </ng-template>

    </p-table>

  </div>

</ng-template>